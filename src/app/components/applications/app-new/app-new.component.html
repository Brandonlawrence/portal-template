<div class="bg-container bg-s py-2">
    <div class="container">
        <img src="assets/img/arrow-left.svg" alt="arrow-icon">
        <a routerLink="/manage" class="font-m font-med pl-1">Back to Manage Apps</a>
        <h1 class="navigation-h1 mt-1">{{pageTitle}}</h1>
    </div>
</div>
<div class="container container-m mt-3 px-md-5">
    <form [formGroup]="appDataFormGroup">
        <div class="d-flex flex-column flex-md-row align-items-md-center mb-2">
            <oc-label text="Choose your app type" required="true" class="text-nowrap col-md-3 mr-2 mb-1 mb-md-0 pl-0"></oc-label>
            <div class="d-flex flex-column w-100">
                <oc-select formControlName="type"
                           labelField="label"
                           [selectValArr]="currentAppsTypesItems"
                            class="w-100">
                </oc-select>
                <oc-error [control]="appDataFormGroup.get('appType')"></oc-error>
            </div>
        </div>
        <ng-container *ngIf="pageType === 'update'">
            <div class="d-flex flex-column flex-md-row  align-items-md-center mb-2" >
                <oc-label text="Name" required="true" class="text-nowrap col-md-3 mr-2 mb-1 mb-md-0 pl-0"></oc-label>
                <div class="d-flex flex-column w-100">
                    <oc-input formControlName="name"
                              [class]="'form-control'"></oc-input>
                    <oc-error field="name" [control]="appDataFormGroup.get('name')"></oc-error>
                </div>
            </div>
            <div class="d-flex flex-column flex-md-row align-items-md-center mb-2" >
                <oc-label text="Safe Name" required="true" class="text-nowrap col-md-3 mr-2 mb-1 mb-md-0 pl-0"></oc-label>
                <div class="d-flex flex-column w-100">
                    <oc-tags formControlName="safeName"
                             title=" "
                             minTagsCount="1"></oc-tags>
                    <oc-error [control]="appDataFormGroup.get('safeNames')"></oc-error>
                </div>
            </div>
        </ng-container>
    </form>
    <div *ngIf="appFields?.fields">
        <oc-form [formJsonData]="appFields"
                 (formDataUpdated)="getAppFormData($event)"
                 labelPosition="left"
                 [showButton]="false"
                 (isFormInvalid)="getAppFormStatus($event)"
                 [setFormDirty]="setFormErrors"
                 (createdForm)="getCreatedForm($event)">
        </oc-form>
        <div class="mt-2 mb-2 d-flex flex-column flex-md-row align-items-md-center">
            <div class="col-md-3 mr-2 pl-0 mb-md-0"></div>
            <div class="d-flex flex-row justify-content-between w-100">
                <div class="form-btn">
                    <oc-button type="secondary" text="Cancel" class="w-100" routerLink="/manage"></oc-button>
                </div>
                <div class="form-btn">
                    <oc-button type="secondary" text="Save" class="w-100" (click)="saveApp('draft')"
                               [disabled]="appDataFormGroup.invalid"></oc-button>
                </div>
                <div class="form-btn">
                    <oc-button type="primary" text="Submit" class="w-100"
                               [disabled]="appDataFormGroup.invalid || lockSubmitButton" (click)="openConfirmationModal()"></oc-button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="divider"></div>
